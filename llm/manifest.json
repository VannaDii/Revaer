{
  "version": "0.1.0",
  "generated": "2026-01-17T02:55:08.163230327+00:00",
  "entries": [
    {
      "id": "adr/001-configuration-revisioning",
      "title": "001 – Global Configuration Revisioning",
      "summary": "Status: Proposed Date: 2025-02-23",
      "tags": [
        "consequences",
        "context",
        "decision",
        "follow-up"
      ],
      "href": "/adr/001-configuration-revisioning/"
    },
    {
      "id": "adr/002-setup-token-lifecycle",
      "title": "002 – Setup Token Lifecycle & Secrets Bootstrap",
      "summary": "Status: Proposed Date: 2025-02-23",
      "tags": [
        "consequences",
        "context",
        "decision",
        "follow-up"
      ],
      "href": "/adr/002-setup-token-lifecycle/"
    },
    {
      "id": "adr/003-libtorrent-session-runner",
      "title": "003 – Libtorrent Session Runner Architecture",
      "summary": "Status: Accepted Date: 2025-10-16",
      "tags": [
        "consequences",
        "context",
        "decision",
        "follow-up"
      ],
      "href": "/adr/003-libtorrent-session-runner/"
    },
    {
      "id": "adr/004-phase-one-delivery",
      "title": "004 – Phase One Delivery Track",
      "summary": "Status: Accepted Date: 2025-10-17",
      "tags": [
        "dependency-rationale",
        "design-notes",
        "motivation",
        "observability-updates",
        "outcome",
        "risk-rollback-plan",
        "test-coverage-summary"
      ],
      "href": "/adr/004-phase-one-delivery/"
    },
    {
      "id": "adr/005-fsops-pipeline",
      "title": "005 – FsOps Pipeline Hardening",
      "summary": "Status: Accepted Date: 2025-10-17",
      "tags": [
        "consequences",
        "context",
        "decision",
        "verification"
      ],
      "href": "/adr/005-fsops-pipeline/"
    },
    {
      "id": "adr/006-api-cli-contract",
      "title": "006 – Unified API & CLI Contract",
      "summary": "Status: Accepted Date: 2025-10-17",
      "tags": [
        "consequences",
        "context",
        "decision",
        "verification"
      ],
      "href": "/adr/006-api-cli-contract/"
    },
    {
      "id": "adr/007-security-posture",
      "title": "007 – API Key Security & Rate Limiting",
      "summary": "Status: Accepted Date: 2025-10-17",
      "tags": [
        "consequences",
        "context",
        "decision",
        "verification"
      ],
      "href": "/adr/007-security-posture/"
    },
    {
      "id": "adr/008-phase-one-remaining-task",
      "title": "008 – Phase One Remaining Delivery (Task Record)",
      "summary": "Status: In Progress Date: 2025-10-17",
      "tags": [
        "dependency-rationale",
        "design-notes",
        "motivation",
        "observability-updates",
        "risk-rollback",
        "test-coverage-summary"
      ],
      "href": "/adr/008-phase-one-remaining-task/"
    },
    {
      "id": "adr/009-fsops-permission-hardening",
      "title": "009 – FsOps Permission Hardening",
      "summary": "Status: Accepted Date: 2025-10-18",
      "tags": [
        "dependency-rationale",
        "design-notes",
        "motivation",
        "observability-updates",
        "risk-rollback-plan",
        "test-coverage-summary"
      ],
      "href": "/adr/009-fsops-permission-hardening/"
    },
    {
      "id": "adr/010-agent-compliance-sweep",
      "title": "Agent Compliance Sweep",
      "summary": "Status: Accepted Date: 2025-11-01 Context: AGENT.md requires just recipes to enforce warnings-as-errors and mandates a global CLI --output json|table selector; the repository had drifted (recipes invoked cargo without the configured rustflags and the CLI only exposed per-command --format switches). Motivation: restore explicit compliance so local and CI workflows produce identical results and the documented CLI surface remains accurate for operators and scripts. Decision: Design notes: updated just lint/check/test/udeps to follow the prescribed commands, wiring build.rustflags=[\"-Dwarnings\"] through just, probing cargo-udeps with the stable toolchain first, and automatically retrying with nightly when the tool still requires -Z binary-dep-depinfo (surfacing a single log",
      "tags": [],
      "href": "/adr/010-agent-compliance-sweep/"
    },
    {
      "id": "adr/011-coverage-hardening-phase-two",
      "title": "Coverage Hardening Phase Two",
      "summary": "Status: Accepted Date: 2025-11-02 Context: AGENT.md now forbids suppressing coverage with cargo llvm-cov flags and requires a ≥80 % threshold across all libraries. The workspace still relied on just cov exclusions and lacked comprehensive tests in revaer-doc-indexer and revaer-cli, blocking true compliance. Motivation: remove the tooling loophole, add high-value tests, and document the remaining work needed to finish the coverage push. Decision: Design notes: Updated the Justfile so just cov executes cargo llvm-cov --workspace --fail-under-lines 80, matching AGENT.md without suppression flags. Added an extensive unit suite for revaer-doc-indexer that exercises markdown parsing, fallback summaries, tag normalisation, schema validation, and manifest",
      "tags": [],
      "href": "/adr/011-coverage-hardening-phase-two/"
    },
    {
      "id": "adr/012-agent-compliance-refresh",
      "title": "Agent Compliance Refresh",
      "summary": "Status: Accepted Date: 2025-11-02 Context: AGENT.md forbids unsafe code across the workspace, yet the configuration integration tests were still using an unsafe block when populating DOCKER_HOST. The task ensures ongoing conformance with the agent policy and documents the work so future checks remain traceable. Decision: Deleted the redundant host-configuration helper so the tests defer to testcontainers' built-in socket discovery instead of mutating the process environment. Alternatives considered: leave the unsafe block in place (rejected because it violates the prime directive), gate the tests behind a feature flag (rejected—dead test code would violate the zero-dead-code rule). Consequences: Positive outcomes: the test",
      "tags": [],
      "href": "/adr/012-agent-compliance-refresh/"
    },
    {
      "id": "adr/013-runtime-persistence",
      "title": "013 – Runtime Persistence for Torrents and FsOps Jobs",
      "summary": "Status: Accepted Date: 2025-10-27",
      "tags": [
        "dependency-rationale",
        "design-notes",
        "motivation",
        "observability-updates",
        "risk-rollback",
        "test-coverage-summary"
      ],
      "href": "/adr/013-runtime-persistence/"
    },
    {
      "id": "adr/014-data-access-layer",
      "title": "014 – Centralized Data Access Layer",
      "summary": "Status: Accepted Date: 2025-02-14",
      "tags": [
        "consequences",
        "context",
        "decision",
        "follow-up"
      ],
      "href": "/adr/014-data-access-layer/"
    },
    {
      "id": "adr/015-agent-compliance-hardening",
      "title": "015: Agent Compliance Hardening",
      "summary": "Status: Superseded by 016 Date: 2025-11-26 Context: AGENT.md now forbids unsafe code and bans lint suppressions for precision loss, missing docs/errors, and dormant code; several crates still relied on those allowances. The libtorrent adapter depended on a C++ bridge and build.rs, introducing unsafe blocks that violated the updated directives. API/config paths carried #[allow] gates to bypass documentation and float-cast lints, masking real enforcement. Decision: Removed the libtorrent C++ bridge (build script and FFI sources) and now run the adapter solely on the safe StubSession, keeping the crate #![forbid(unsafe_code)]. Swapped float casts in rate limiting/formatting paths for integer-based accounting and From",
      "tags": [],
      "href": "/adr/015-agent-compliance-hardening/"
    },
    {
      "id": "adr/016-libtorrent-restoration",
      "title": "016: Libtorrent Restoration",
      "summary": "Status: Accepted Date: 2025-11-26 Context: AGENT rules now permit tightly scoped #[allow(...)] inside unavoidable FFI. Removing the C++ bridge dropped real torrent handling, violating product requirements. We need a known-compatible libtorrent integration with deterministic build wiring and coverage across the feature-gated path. Decision: Restored the native libtorrent C++ bridge (cxx), FFI bindings, and NativeSession so the libtorrent feature drives the actual engine path while stubs remain for tests/offline builds. Kept lint posture strict (#![deny(unsafe_code)), confining #[allow(unsafe_code)] to the FFI module only. Build script now enforces a minimum libtorrent version (>= 2.0.10) via pkg-config, supports an explicit LIBTORRENT_BUNDLE_DIR (include/lib) for vendored",
      "tags": [],
      "href": "/adr/016-libtorrent-restoration/"
    },
    {
      "id": "adr/017-sqlx-named-bind",
      "title": "Avoid `sqlx-named-bind`",
      "summary": "Status: Accepted Date: 2025-11-28",
      "tags": [
        "consequences",
        "context",
        "decision",
        "follow-up"
      ],
      "href": "/adr/017-sqlx-named-bind/"
    },
    {
      "id": "adr/018-retire-testcontainers",
      "title": "Retire testcontainers",
      "summary": "Status: Accepted Date: 2025-12-06 Context: cargo audit flagged rustls-pemfile (RUSTSEC-2025-0134) as unmaintained, pulled via testcontainers → bollard. AGENT.md forbids local patches and prefers minimal dependencies; maintaining a forked TLS stack would violate both. Our Docker-backed integration tests (Postgres + libtorrent) depended on testcontainers; removing the crate requires alternate coverage. Decision: Remove testcontainers and associated patches from the workspace; delete Docker-backed integration tests and replace them with lightweight unit coverage. Keep filesystem orchestration tests in place using in-process fakes instead of containerized services. Drop the .secignore/deny.toml allowances tied to the testcontainers advisory; rely solely on crates.io sources. Alternatives considered: Upgrade to",
      "tags": [],
      "href": "/adr/018-retire-testcontainers/"
    },
    {
      "id": "adr/019-advisory-rustsec-2024-0370",
      "title": "Advisory RUSTSEC-2024-0370 Temporary Ignore",
      "summary": "Status: Accepted Date: 2025-02-21 Context: The workspace depends on yew for the UI crate, which transitively pulls proc-macro-error, currently flagged by advisory RUSTSEC-2024-0370 (unmaintained). The affected package is used only via the Yew compile-time macro stack; there is no direct runtime exposure, and no maintained alternative in the current Yew release line. cargo-deny and .secignore both require an explicit justification and remediation plan for any ignore. Decision: Keep the advisory ignored in .secignore and deny.toml while remaining on the current Yew release. Monitor Yew’s releases and remove the ignore as soon as Yew drops the proc-macro-error dependency or provides a",
      "tags": [],
      "href": "/adr/019-advisory-rustsec-2024-0370/"
    },
    {
      "id": "adr/020-torrent-engine-precursors",
      "title": "Torrent engine precursor hardening",
      "summary": "Status: Accepted Date: 2025-12-10 Context: Torrent work in TORRENT_GAPS.md needs shared scaffolding before adding tracker/NAT/limit features. Validation and persistence had drifted across API/runtime/DB; per-field SQL updates risked skew and missing guard rails. The FFI surface for libtorrent was a flat struct that would become unmanageable as new knobs land. Native tests were slow to write without a harness to spin a session and apply configs. Decision: Introduced engine_profile module to normalise/validate profile patches, emit effective views with guard-rail warnings, and clamp before storage/runtime use. Replaced per-field SQL with a unified update_engine_profile stored procedure and EngineProfileUpdate data shape to keep DB/API",
      "tags": [],
      "href": "/adr/020-torrent-engine-precursors/"
    },
    {
      "id": "adr/021-torrent-precursor-enforcement",
      "title": "Torrent precursor enforcement",
      "summary": "Status: Accepted Date: 2025-12-12 Context: TORRENT_GAPS precursors called for unified engine profile persistence/validation before expanding tracker/NAT features. Legacy per-field stored procedures risked drifting from the shared validator and API/runtime expectations. Runtime → FFI mapping lived inline, making it harder to clamp unsafe values or extend with new options; native tests lacked a reusable harness. Decision: Retired the per-field engine profile update functions/procedures in favour of the single update_engine_profile entry point (migration 0005_engine_profile_cleanup), keeping DB/API validation aligned. Introduced EngineOptionsPlan::from_runtime_config to clamp/disable invalid runtime values before crossing the FFI boundary and surface guard-rail warnings in the native session. Added a reusable NativeSessionHarness",
      "tags": [],
      "href": "/adr/021-torrent-precursor-enforcement/"
    },
    {
      "id": "adr/022-torrent-settings-parity",
      "title": "Torrent settings parity and observability",
      "summary": "Status: Accepted Date: 2025-12-12 Context: TORRENT_GAPS precursor calls for API/runtime parity and observability of the knobs we already support. Torrent details previously lacked a single place to inspect applied settings (rate caps, selection rules, tags/trackers) and metadata drifted after rate/selection updates. Engine profile parity (stored vs effective) is already exposed via the config snapshot, but per-torrent settings needed an equivalent surface. Decision: Expose a TorrentSettingsView on torrent detail responses covering download_dir/sequential status from the inspector plus tags/trackers/rate caps and the latest selection rules captured in API state. Record selection rules and rate limit updates in TorrentMetadata on creation and after",
      "tags": [],
      "href": "/adr/022-torrent-settings-parity/"
    },
    {
      "id": "adr/023-tracker-config-wiring",
      "title": "Tracker Config Wiring",
      "summary": "Status: Accepted Date: 2025-12-12 Context: Tracker configuration and per-torrent trackers were only partially wired, creating drift between API, DB, and runtime handling. Client-supplied trackers were not persisted in resume metadata, and tags were ignored by the worker store, risking loss across restarts. AGENT guardrails require validation parity via stored procedures and no dead code as tracker fields expand. Decision: Add typed tracker config with shared normalization plus a stored procedure that clamps lists, proxy fields, and timeouts before persistence. Map tracker config into runtime/FFI/native session (user agent, announce overrides, proxy, default/extra lists, replace flag) and thread per-torrent trackers/replace through the",
      "tags": [],
      "href": "/adr/023-tracker-config-wiring/"
    },
    {
      "id": "adr/024-seeding-stop-criteria",
      "title": "Seeding stop criteria and per-torrent overrides",
      "summary": "Status: Accepted Date: 2025-12-14 Context: TORRENT_GAPS calls for seed ratio/time stop knobs at both profile and per-torrent scope. We must keep config/DB/runtime/API in lock-step via stored procedures and shared validators (AGENT). Libtorrent exposes global share_ratio_limit / seed_time_limit, but per-torrent setters are limited; we still need per-torrent overrides. No new dependencies allowed; coverage, lint, and just ci gates must stay green. Decision: Added seed_ratio_limit (f64) and seed_time_limit (seconds, i64) to engine profiles with normalization/validation (non-negative, finite) and a migration updating the unified stored procs. Threaded the limits through runtime plans/options; apply_config now sets libtorrent’s global share_ratio_limit/seed_time_limit (ratio scaled ×1000). Worker records",
      "tags": [],
      "href": "/adr/024-seeding-stop-criteria/"
    },
    {
      "id": "adr/025-seed-mode-add-as-complete",
      "title": "025: Seed mode admission with optional hash sampling",
      "summary": "Allow seed-mode admissions without full rechecks while optionally sampling hashes to guard against corrupt data.",
      "tags": [
        "consequences",
        "context",
        "decision",
        "status"
      ],
      "href": "/adr/025-seed-mode-add-as-complete/"
    },
    {
      "id": "adr/026-queue-auto-managed-and-pex",
      "title": "Queue auto-managed defaults and PEX threading",
      "summary": "Status: Accepted Date: 2025-03-16 Context: TORRENT_GAPS called out missing support for queue management toggles (auto-managed defaults, prefer-seed/don’t-count-slow policies) and peer exchange enable/disable paths. Config/runtime needed a single source of truth so workers and the native bridge don’t drift, and per-torrent overrides had to survive restarts via metadata. Decision: Added engine profile fields auto_managed, auto_manage_prefer_seeds, and dont_count_slow_torrents with validation/normalization and a unified stored-proc update, plus a migration to persist them. Extended runtime/FFI to carry the queue policy flags; native now sets libtorrent’s auto_manage_prefer_seeds/dont_count_slow_torrents, tracks the default auto-managed posture, and applies per-torrent overrides (including queue position) when adding torrents. Threaded pex_enabled through",
      "tags": [],
      "href": "/adr/026-queue-auto-managed-and-pex/"
    },
    {
      "id": "adr/027-choking-and-super-seeding",
      "title": "Choking Strategy And Super-Seeding Configuration",
      "summary": "Status: Accepted Date: 2025-12-14 Context: TORRENT_GAPS requires configurable choke/unchoke strategy and super-seeding defaults. We must keep config/runtime/FFI/native paths aligned while preserving safe defaults. API and persistence need to surface new knobs without regressing existing behaviour. Decision: Added engine profile fields for choking (choking_algorithm, seed_choking_algorithm, strict_super_seeding, optimistic_unchoke_slots, max_queued_disk_bytes) and super_seeding. Normalise/validate values with guard-rail warnings; persist via a single stored-proc update path and migration 0006_choking_and_super_seeding.sql (consolidated into 0007_rebaseline.sql per ADR 030). Thread new options through runtime config, FFI structs, and native session (settings_pack + per-torrent flags). Per-torrent super_seeding overrides are stored with metadata. Updated API models/OpenAPI and added tests covering canonicalisation,",
      "tags": [],
      "href": "/adr/027-choking-and-super-seeding/"
    },
    {
      "id": "adr/028-qbittorrent-parity-and-tracker-tls",
      "title": "qBittorrent Parity and Tracker TLS Wiring",
      "summary": "Status: Accepted Date: 2025-12-17 Context: Libtorrent deprecation warnings and Phase 1 compatibility gaps required us to move away from deprecated tracker TLS fields and finish the qBittorrent façade. The façade needed tracker, peer, and properties endpoints so qBittorrent clients can query Revaer without custom plugins. Changes must comply with the AGENT.md gates (no unused code, warnings-as-errors, tests/coverage via just ci). Decision: Thread tracker TLS settings (trust store, verification flags, client cert/key) through config → runtime → FFI/native without using deprecated libtorrent fields, and cover with native tests. Expose qBittorrent-compatible endpoints for torrent properties, trackers, peer sync, categories, and tags; return",
      "tags": [],
      "href": "/adr/028-qbittorrent-parity-and-tracker-tls/"
    },
    {
      "id": "adr/029-torrent-authoring-labels-and-metadata",
      "title": "Torrent Authoring, Labels, and Metadata Updates",
      "summary": "Status: Accepted Date: 2025-12-23 Context: Remaining torrent gaps required authoring support plus consistent comment/source/private visibility. Category/tag defaults and cleanup policies needed a shared storage path and validation. Changes must comply with AGENT.md (no dead code, tests, docs, OpenAPI sync). Decision: Expose a create-torrent authoring endpoint that routes through the workflow and libtorrent bindings. Surface comment/source/private fields in status/settings, allow comment updates only, and validate private tracker requirements on add. Persist label policies in app_profile.features, provide list/upsert endpoints for categories/tags, and apply policy defaults (including cleanup) on add. Consequences: API clients can author torrents, set label defaults, and observe comment/source/private metadata",
      "tags": [],
      "href": "/adr/029-torrent-authoring-labels-and-metadata/"
    },
    {
      "id": "adr/030-migration-consolidation",
      "title": "030 – Migration Consolidation for Initial Setup",
      "summary": "Status: Accepted Date: 2025-12-23 Context: The project is unreleased and migration history does not need to remain split. A single init migration simplifies new environment bootstrap and reduces ordering drift. Decision: Collapse all SQL migrations in crates/revaer-data/migrations into 0007_rebaseline.sql. Remove the remaining numbered migration files after consolidation. Reset the local dev database in just db-start if the migration history no longer matches. Clean llvm-cov artifacts before coverage to keep just ci output free of stale-data warnings. Consequences: **Positive**: Fresh databases start from one deterministic migration; fewer files to track. **Trade-offs**: Historical migration boundaries are lost and existing dev databases must",
      "tags": [],
      "href": "/adr/030-migration-consolidation/"
    },
    {
      "id": "adr/031-ui-asset-sync",
      "title": "UI Nexus Asset Sync Tooling",
      "summary": "Status: Accepted Date: 2025-12-23 Context: The UI consumes Nexus HTML/CSS/JS as vendored, compiled assets with no JS toolchain in dev/CI. We need deterministic sync of vendor CSS, images, and JS into crates/revaer-ui/static/ so Trunk can serve them. Output consistency must be verifiable in CI without relying on external asset pipelines. Decision: Add a Rust CLI tool (asset_sync) that copies Nexus assets into static/nexus, validates the CSS, and writes a lock file. Wire the tool into just so dev, build, and CI checks always run the sync first. Update the UI entry HTML to copy the full static directory and load",
      "tags": [],
      "href": "/adr/031-ui-asset-sync/"
    },
    {
      "id": "adr/032-torrent-ffi-audit-closeout",
      "title": "Torrent FFI Audit Closeout",
      "summary": "Status: Accepted Date: 2025-12-23 Context: The torrent FFI audit identified drift between API/runtime/FFI/native behavior (metadata updates, seed limits, proxy handling, IPv6 mode) and missing CI coverage for native tests. The engine must remain a thin wrapper around libtorrent; unsupported knobs must be rejected early, and native settings must be auditable. Decision: Reject unsupported metadata and per-torrent seed limit updates at the API boundary. Remove Rust-side seeding enforcement and rely on native session settings only. Enforce libtorrent version checks at build time and fail when unsupported. Add native settings inspection hooks and native integration tests for proxy auth, seed limits, and",
      "tags": [
        "dependency-rationale",
        "design-notes",
        "motivation",
        "observability-updates",
        "risk-rollback-plan",
        "test-coverage-summary"
      ],
      "href": "/adr/032-torrent-ffi-audit-closeout/"
    },
    {
      "id": "adr/033-ui-sse-auth-setup",
      "title": "UI SSE + Auth/Setup Wiring",
      "summary": "Status: Accepted Date: 2025-12-24 Context: Motivation: finalize first-run setup gating and SSE updates while keeping auth headers on every request. Constraints: EventSource cannot set headers; SSE must fall back cleanly; avoid new dependencies. Decision: Implement a fetch-stream SSE runner with AbortController, bounded backoff, and fallback endpoint selection. Parse SSE frames into typed envelopes when possible and throttle list refreshes when updates are incomplete. Keep auth/setup flow in app state and attach API key or Basic auth for SSE streams. Alternatives considered: EventSource with query param auth, periodic polling, or WebSockets (rejected for header limitations or higher complexity). Consequences: Positive outcomes:",
      "tags": [],
      "href": "/adr/033-ui-sse-auth-setup/"
    },
    {
      "id": "adr/034-ui-sse-store-apiclient",
      "title": "UI SSE normalization, progress coalescing, and ApiClient singleton",
      "summary": "Status: Accepted Date: 2025-12-24 Context: The UI SSE pipeline needed legacy payload normalization, replay support, and render-friendly progress handling. App state was still split across use_state, and API clients were being constructed per call. The dashboard checklist requires a single SSE reducer path and a singleton ApiClient via context. Decision: Normalize SSE payloads into UiEventEnvelope and route all updates through one reducer path in the app shell. Persist and replay Last-Event-ID, add SSE query filters derived from store state, and coalesce progress updates on a fixed cadence. Introduce an ApiCtx context that owns a single ApiClient instance with mutable auth",
      "tags": [
        "dependency-rationale",
        "design-notes",
        "motivation",
        "observability-updates",
        "risk-rollback-plan",
        "test-coverage-summary"
      ],
      "href": "/adr/034-ui-sse-store-apiclient/"
    },
    {
      "id": "adr/035-advisory-rustsec-2021-0065",
      "title": "Advisory RUSTSEC-2021-0065 Temporary Ignore",
      "summary": "Status: Superseded by 073 (vendored yewdux exception tracked in ADR 074) Date: 2025-12-24 Context: The UI depends on yewdux, which transitively pulls anymap and triggers advisory RUSTSEC-2021-0065 (unmaintained). There is no maintained replacement for anymap within the pinned yewdux 0.9.x line, and upgrading yewdux would require a Yew major upgrade. cargo-audit is configured to deny warnings, so ignoring the advisory requires explicit documentation and a remediation plan. Decision: Add RUSTSEC-2021-0065 to .secignore while yewdux requires anymap. Track yewdux upgrades or alternatives that remove anymap and remove the ignore when available. No runtime mitigation is required beyond limiting use to the",
      "tags": [
        "dependency-rationale",
        "design-notes",
        "motivation",
        "observability-updates",
        "risk-rollback-plan",
        "test-coverage-summary"
      ],
      "href": "/adr/035-advisory-rustsec-2021-0065/"
    },
    {
      "id": "adr/036-asset-sync-test-stability",
      "title": "Asset sync test stability under parallel runs",
      "summary": "Status: Accepted Date: 2025-12-24 Context: cargo llvm-cov runs tests in parallel and surfaced a flaky asset_sync test. The temp directory helper used timestamp-based names that could collide under parallel execution. CI requires just ci (including coverage) to pass reliably without intermittent failures. Decision: Replace the time-based temp directory naming with a process id + atomic counter. Retry on AlreadyExists to ensure unique per-test directories without new dependencies. Consequences: Asset sync tests are deterministic under parallel runners and coverage instrumentation. No new crates or runtime behavior changes. Follow-up: None.",
      "tags": [
        "dependency-rationale",
        "design-notes",
        "motivation",
        "observability-updates",
        "risk-rollback-plan",
        "test-coverage-summary"
      ],
      "href": "/adr/036-asset-sync-test-stability/"
    },
    {
      "id": "adr/037-ui-row-slices-system-rates",
      "title": "UI row slices and system-rate store wiring",
      "summary": "Status: Accepted Date: 2025-12-24 Context: The checklist requires row-level selectors and ID-based list rendering to avoid full-row re-renders. System rates must live in the AppStore alongside SSE connection state. UI components should remain free of API side effects while still subscribing to yewdux slices. Decision: Add TorrentRowBase and TorrentProgressSlice selectors and render list rows via ID-based components that subscribe only to slices. Keep bulk selection state in AppStore and expose selectors for selection and system rates. Store SystemRates in SystemState and update it from both dashboard fetches and SSE system-rate events. Consequences: List rows re-render only when their slice changes,",
      "tags": [
        "dependency-rationale",
        "design-notes",
        "motivation",
        "observability-updates",
        "risk-rollback-plan",
        "test-coverage-summary"
      ],
      "href": "/adr/037-ui-row-slices-system-rates/"
    },
    {
      "id": "adr/038-ui-api-models-filters-paging",
      "title": "UI shared API models and torrent query paging state",
      "summary": "Status: Accepted Date: 2025-12-24 Context: The UI duplicated API DTOs, causing drift from backend shapes and blocking checklist compliance. Torrent list fetching needed a real query/paging model to align with the API list response. SSE fsops events required a stable store cache separate from row state. Decision: Extract shared API DTOs into a new revaer-api-models crate and re-export from revaer-api. Update the UI to consume shared DTOs, map list/detail views from API shapes, and parse list responses with next cursors. Add TorrentsQueryModel, TorrentsPaging, and fsops_by_id to the torrent store and update SSE to fill fsops state. Consequences: API DTOs are",
      "tags": [
        "dependency-rationale",
        "design-notes",
        "motivation",
        "observability-updates",
        "risk-rollback-plan",
        "test-coverage-summary"
      ],
      "href": "/adr/038-ui-api-models-filters-paging/"
    },
    {
      "id": "adr/039-ui-store-api-rate-limit",
      "title": "UI store, API coverage, and rate-limit retries",
      "summary": "Status: Accepted Date: 2025-12-24 Context: Shared UI state (theme, toasts, label/health caches) needed to live in the AppStore to match the yewdux architecture rule. The API client needed coverage for health, metrics, and label list endpoints to unblock upcoming screens. Rate-limit responses required user-visible backoff messaging and a safe retry path for idempotent fetches. Decision: Move shell theme/toast/busy state into the AppStore and populate label/health caches from API calls. Extend the UI API client with health/full, metrics, and label list endpoints, leaving option/selection/authoring calls for later UI wiring. Handle 429 responses for torrent list/detail fetches with Retry-After backoff and a",
      "tags": [
        "dependency-rationale",
        "design-notes",
        "motivation",
        "observability-updates",
        "risk-rollback-plan",
        "test-coverage-summary"
      ],
      "href": "/adr/039-ui-store-api-rate-limit/"
    },
    {
      "id": "adr/040-ui-labels-policy",
      "title": "040 – UI Label Policies (Task Record)",
      "summary": "Status: In Progress Date: 2025-10-24",
      "tags": [
        "consequences",
        "decision",
        "dependency-rationale",
        "design-notes",
        "follow-up",
        "motivation",
        "observability-updates",
        "risk-rollback",
        "test-coverage-summary"
      ],
      "href": "/adr/040-ui-labels-policy/"
    },
    {
      "id": "adr/041-ui-health-shortcuts",
      "title": "041 – UI Health View + Label Shortcuts (Task Record)",
      "summary": "Status: In Progress Date: 2025-10-24",
      "tags": [
        "consequences",
        "decision",
        "dependency-rationale",
        "design-notes",
        "follow-up",
        "motivation",
        "observability-updates",
        "risk-rollback",
        "test-coverage-summary"
      ],
      "href": "/adr/041-ui-health-shortcuts/"
    },
    {
      "id": "adr/042-ui-metrics-copy",
      "title": "042 - UI Metrics Copy Button (Task Record)",
      "summary": "Status: In Progress Date: 2025-12-24",
      "tags": [
        "consequences",
        "decision",
        "dependency-rationale",
        "design-notes",
        "motivation",
        "observability-updates",
        "risk-rollback",
        "test-coverage-summary"
      ],
      "href": "/adr/042-ui-metrics-copy/"
    },
    {
      "id": "adr/043-ui-settings-bypass-auth",
      "title": "043 - UI Settings Bypass Local Auth Toggle (Task Record)",
      "summary": "Status: In Progress Date: 2025-12-24",
      "tags": [
        "consequences",
        "decision",
        "dependency-rationale",
        "design-notes",
        "motivation",
        "observability-updates",
        "risk-rollback",
        "test-coverage-summary"
      ],
      "href": "/adr/043-ui-settings-bypass-auth/"
    },
    {
      "id": "adr/044-ui-api-client-options-selection",
      "title": "044 - UI ApiClient Torrent Options/Selection Endpoints (Task Record)",
      "summary": "Status: In Progress Date: 2025-12-24",
      "tags": [
        "consequences",
        "decision",
        "dependency-rationale",
        "design-notes",
        "motivation",
        "observability-updates",
        "risk-rollback",
        "test-coverage-summary"
      ],
      "href": "/adr/044-ui-api-client-options-selection/"
    },
    {
      "id": "adr/045-ui-icon-system",
      "title": "UI Icon System and Icon Buttons",
      "summary": "Status: Accepted Date: 2025-12-24 Context: Motivation: eliminate inline SVGs and standardize icon usage per the dashboard checklist. Constraints: reuse Nexus/DaisyUI styling, avoid new dependencies, keep accessibility consistent. Decision: Summary: add a shared icon module under components/atoms/icons and a reusable IconButton component for icon-only actions. Design notes: provide IconProps (size, class, optional title) and IconVariant for outline/solid arrows; reuse existing .icon-btn styles for consistent hover/focus behavior. Alternatives considered: keep inline SVGs or introduce an external icon crate; rejected to avoid duplication and dependencies. Consequences: Positive outcomes: centralized icon rendering, consistent sizing, and cleaner shell/dashboard markup. Risks/trade-offs: visual regressions if CSS assumptions",
      "tags": [],
      "href": "/adr/045-ui-icon-system/"
    },
    {
      "id": "adr/046-ui-torrent-filters-pagination",
      "title": "UI Torrent Filters, Pagination, and URL Sync",
      "summary": "Status: Accepted Date: 2025-12-24 Context: Motivation: expose torrent filters in the URL and support paged list loading without breaking the normalized store. Constraints: reuse existing API query semantics, avoid new dependencies, and keep URL updates inside app-level routing. Decision: Summary: parse/filter query params from the router location, update the URL when filters change, and add an explicit Load more flow that appends rows. Design notes: use build_torrent_filter_query for URL-only filters, keep refresh fetches cursor-free, and append rows only when a cursor is provided for pagination. Alternatives considered: store cursor in the URL or auto-load more on scroll; rejected to keep",
      "tags": [],
      "href": "/adr/046-ui-torrent-filters-pagination/"
    },
    {
      "id": "adr/047-ui-torrent-updated-column",
      "title": "UI Torrent List Updated Timestamp Column",
      "summary": "Status: Accepted Date: 2025-12-24 Context: Motivation: surface the last updated timestamp alongside the existing list columns. Constraints: avoid new dependencies and keep row slices stable for list rendering performance. Decision: Summary: store a formatted updated timestamp string in the torrent row base slice and render it as an optional column. Alternatives considered: compute formatting in the component layer or add a relative time utility; rejected to keep row rendering pure and avoid new helpers. Consequences: Positive outcomes: list rows now include an explicit updated timestamp column with overflow fallback. Risks/trade-offs: updated timestamps refresh only when list data is refreshed, not",
      "tags": [],
      "href": "/adr/047-ui-torrent-updated-column/"
    },
    {
      "id": "adr/048-ui-torrent-actions-bulk-controls",
      "title": "ADR 048: UI torrent row actions, bulk controls, and rate/remove dialogs",
      "summary": "Status: Accepted Date: 2025-12-24 Context: Motivation: complete torrent list row actions and bulk controls with confirm/rate UX and concurrency safety. Constraints: no new dependencies, no unwrap/expect in non-test code, yewdux-managed shared state, and clean just ci. Decision: Add UI action variants (reannounce, sequential on/off, rate) and map them to API actions. Introduce row action menus plus remove/rate dialogs with input validation and delete-data toggle. Implement a bulk-action runner with a concurrency cap, failure aggregation, and drawer-close logic when multi-select remains. Alternatives considered: per-item toasts with sequential execution (rejected for spam and slow UX). Consequences: Positive: consistent row/bulk actions, safer removals,",
      "tags": [],
      "href": "/adr/048-ui-torrent-actions-bulk-controls/"
    },
    {
      "id": "adr/049-ui-detail-overview-files-options",
      "title": "UI detail drawer overview/files/options",
      "summary": "Status: Accepted Date: 2025-12-24",
      "tags": [
        "consequences",
        "context",
        "decision",
        "dependency-rationale",
        "design-notes",
        "motivation",
        "observability-updates",
        "risk-rollback-plan",
        "test-coverage-summary"
      ],
      "href": "/adr/049-ui-detail-overview-files-options/"
    },
    {
      "id": "adr/050-ui-torrent-fab-create-modals",
      "title": "UI torrent FAB + create modals",
      "summary": "Status: Accepted Date: 2025-12-24 Context: The torrent UX checklist requires FAB-driven add/create modals and initial rate limits. API calls must stay in the app layer with shared DTOs, and UI state lives in yewdux. Decision: Implement a floating action button that opens Add and Create torrent modals. Wire POST /v1/torrents/create through the ApiClient and surface results + copy actions. Move UI preferences (mode/density/locale) into the shared store for consistent access. Alternatives considered: Keep the add panel inline in the list view (rejected; no FAB flow). Let modal components call the API directly (rejected; breaks layering rules). Consequences: Adds modal UX",
      "tags": [
        "dependency-rationale",
        "design-notes",
        "motivation",
        "observability-updates",
        "risk-rollback-plan",
        "test-coverage-summary"
      ],
      "href": "/adr/050-ui-torrent-fab-create-modals/"
    },
    {
      "id": "adr/051-ui-api-models-primitives",
      "title": "UI shared API models and UX primitives",
      "summary": "Status: Accepted Date: 2025-12-25 Context: The UI and CLI duplicated health/setup/dashboard DTOs, increasing drift risk against the API. The torrent toolbar and labels views lacked debounced search, multi-select, and reusable empty/bulk primitives. The UI checklist requires shared API models and a component primitive set with prop-driven configuration. Decision: Move health, setup-start, and dashboard DTOs into revaer-api-models and consume them from the API, UI, and CLI. Add shared UI primitives (SearchInput with debounce, MultiSelect, EmptyState, BulkActionBar) and extend existing inputs/buttons for prop coverage. Refactor torrent filters and label empty state to use the new primitives while retaining text-input fallback for tags",
      "tags": [
        "task-record"
      ],
      "href": "/adr/051-ui-api-models-primitives/"
    },
    {
      "id": "adr/052-ui-nexus-dashboard",
      "title": "UI dashboard migration to Nexus vendor layout",
      "summary": "Status: Accepted Date: 2025-12-25 Context: Align the dashboard and shell UI with the vendored Nexus HTML to remove drift. Remove the blocking SSE overlay and replace it with a non-blocking connectivity surface. Preserve routing and layout classes so Nexus CSS can remain authoritative. Decision: Replace the old dashboard and shell markup with Nexus vendor partials and dashboard structure. Introduce SSE connectivity state in the store with a drawer-footer indicator and modal. Remove legacy dashboard CSS overrides and ensure vendor app.css is the primary styling source. Consequences: Positive: Nexus parity, simpler shell structure, non-blocking connectivity UX. Risks: UI copy/labels diverge from",
      "tags": [
        "dependency-rationale",
        "design-notes",
        "motivation",
        "observability-updates",
        "risk-rollback-plan",
        "test-coverage-summary"
      ],
      "href": "/adr/052-ui-nexus-dashboard/"
    },
    {
      "id": "adr/053-ui-dashboard-hardline-rebuild",
      "title": "UI: Hardline Nexus Dashboard Rebuild and Settings Wiring",
      "summary": "Status: Accepted Date: 2025-12-26 Context: The Home dashboard must match the vendored Nexus HTML structure and DaisyUI component patterns. Navigation and shell need to be simplified to Home/Torrents/Settings with a non-blocking SSE indicator. Settings must remain reachable even when auth is missing and show a config snapshot. Decision: Rebuild dashboard sections to mirror Nexus markup (stats cards, storage status, recent events, tracker health, queue summary). Align AppShell sidebar/topbar with Nexus partial structure and move the SSE indicator to the sidebar footer. Wire Settings to fetch /v1/config and provide test-connection actions while keeping auth overlays off the Settings route. Disable wasm-opt",
      "tags": [
        "task-record"
      ],
      "href": "/adr/053-ui-dashboard-hardline-rebuild/"
    },
    {
      "id": "adr/054-ui-dashboard-nexus-parity",
      "title": "UI Dashboard Nexus Parity Tweaks",
      "summary": "Status: Accepted Date: 2025-12-27 Context: Dashboard cards drifted from the vendored Nexus markup and referenced missing i18n keys. Connectivity modal included fields outside the required SSE status spec. Constraints: keep Nexus layout structure, use DaisyUI semantic tokens, avoid new dependencies. Decision: Rework the storage usage and tracker health cards to match Nexus layout structure and available translation keys. Align queue summary/global summary labels to existing nav/dashboard strings. Trim the SSE connectivity modal to the required fields and labels. Replace dashboard recent events table markup with a DaisyUI list layout. Limit SSE indicator label expansion to the sidebar expanded state only.",
      "tags": [
        "dependency-rationale",
        "design-notes",
        "motivation",
        "observability-updates",
        "risk-rollback-plan",
        "test-coverage-summary"
      ],
      "href": "/adr/054-ui-dashboard-nexus-parity/"
    },
    {
      "id": "adr/055-factory-reset-bootstrap-api-key",
      "title": "Factory Reset and Bootstrap API Key",
      "summary": "Status: Accepted Date: 2025-12-27 Context: Need a safe factory reset workflow that keeps navigation available while enforcing confirmation. Setup completion must return a bootstrap API key with a 14-day client-side expiry. Raw reset errors must surface to the UI for operator visibility. Decision: Add revaer_config.factory_reset() stored procedure and /admin/factory-reset API endpoint guarded by API key auth. Ensure setup completion provisions or reuses a bootstrap API key and returns it with an expiry timestamp. Persist the bootstrap API key with expiry in local storage and require manual dismissal for error toasts. Consequences: Factory reset clears configuration/runtime data and returns the system",
      "tags": [],
      "href": "/adr/055-factory-reset-bootstrap-api-key/"
    },
    {
      "id": "adr/056-factory-reset-bootstrap-auth-fallback",
      "title": "Factory reset bootstrap auth fallback",
      "summary": "Status: Accepted Date: 2025-12-28 Context: Factory reset requires API key auth, but existing installs can be in active mode with zero API keys (pre-bootstrap). Without a key, the UI cannot authenticate and the system has no recovery path. The reset path must still use stored procedures and surface raw errors when the reset fails. Decision: Add a has_api_keys capability to the config facade so the API can detect empty key inventories. Introduce a factory-reset-specific auth gate that accepts valid API keys, or allows the reset when no API keys exist (logging a warning). Keep confirmation phrase validation unchanged. Consequences: Provides",
      "tags": [],
      "href": "/adr/056-factory-reset-bootstrap-auth-fallback/"
    },
    {
      "id": "adr/057-ui-settings-tabs-controls",
      "title": "UI settings tabs and editor controls",
      "summary": "Status: Accepted Date: 2025-12-28 Context: The settings screen exposed raw configuration values without meaningful grouping or editing controls. Torrent operators need quick access to download, seeding, network, and storage controls with clear defaults. Settings patches must flow through the existing API and honor immutable fields. Decision: Rebuild the settings UI as tabbed panels aligned with torrent workflows (connection, downloads, seeding, network, storage, system). Drive all editable controls from the config snapshot and submit targeted /v1/config changesets per group. Treat immutable fields and effective engine snapshots as read-only with copy-to-clipboard affordances. Consequences: Settings are now grouped for faster navigation and support",
      "tags": [
        "dependency-rationale",
        "design-notes",
        "motivation",
        "observability-updates",
        "risk-rollback-plan",
        "test-coverage-summary"
      ],
      "href": "/adr/057-ui-settings-tabs-controls/"
    },
    {
      "id": "adr/058-settings-logs-fs-browser",
      "title": "UI Settings Controls, Logs Stream, and Filesystem Browser",
      "summary": "Status: Accepted Date: 2025-12-28 Context: Motivation: replace JSON settings editing with structured controls, add an on-demand logs view, and provide a server-backed filesystem browser for path selection. Constraints: keep stored-procedure access, avoid new dependencies, and only stream logs while the Logs route is active. Decision: Added an SSE logs stream backed by a log broadcast writer and a Logs UI route that connects only while mounted. Added a filesystem browse endpoint and path picker UI for directory selection, with server-side path validation for label policy download dirs. Reworked settings into tabbed sections with a single draft/save bar and structured field",
      "tags": [],
      "href": "/adr/058-settings-logs-fs-browser/"
    },
    {
      "id": "adr/059-migration-rebaseline",
      "title": "059 – Migration Rebaseline And JSON Backfill Guardrails",
      "summary": "Status: Accepted Date: 2025-12-28 Context: Migration sprawl made upgrades brittle and conflicted with the single-file mandate. JSON columns are banned for settings; backfills must not wipe normalized data on upgrade. The baseline migration must be idempotent for both new databases and upgrades. Decision: Collapse migration history into crates/revaer-data/migrations/0007_rebaseline.sql and remove prior migration files. Add upgrade-safe guardrails in the JSON backfill to avoid overwriting normalized data when legacy columns are empty or newly introduced. Mark the configuration migrator to ignore missing files so existing databases can apply the new baseline cleanly. Update documentation and dev seed SQL to match the normalized",
      "tags": [],
      "href": "/adr/059-migration-rebaseline/"
    },
    {
      "id": "adr/060-auth-expiry-error-context",
      "title": "Auth Expiry + Error Context Fields",
      "summary": "Status: Accepted Date: 2025-12-28 Context: Factory reset failures must surface raw error details to clients without embedding context in error messages. Setup completion must issue an API key that expires after 14 days, and expiration must be enforced server-side. JSONB-based helpers are disallowed; legacy helpers must be removed while preserving upgrade paths. Decision: Add an optional expires_at timestamp to auth_api_keys and extend API key upsert helpers to persist it. Extend RFC9457 ProblemDetails with structured context fields so raw error details can be returned separately from constant error messages. Purge JSONB-based helper functions during migration to keep final database surfaces JSON-free.",
      "tags": [],
      "href": "/adr/060-auth-expiry-error-context/"
    },
    {
      "id": "adr/061-api-i18n-openapi-assets",
      "title": "API i18n error localization and OpenAPI assets",
      "summary": "Status: Accepted Date: 2025-12-29 Context: API error responses needed localization via Accept-Language without introducing new dependencies. openapi.rs could not retain hard-coded asset paths while still embedding the spec. Decision: Add a lightweight API i18n module that selects a locale from Accept-Language, loads an embedded bundle, and localizes error titles/details/invalid params with fallback to the original string. Centralize embedded OpenAPI assets in a dedicated module so openapi.rs is path-free. Alternatives considered: key-based localization in all error constructors (larger refactor); relying on client-only localization (does not meet API requirement). Design notes: Locale parsing accepts the first supported tag and falls back to",
      "tags": [],
      "href": "/adr/061-api-i18n-openapi-assets/"
    },
    {
      "id": "adr/062-eventbus-publish-guardrails",
      "title": "Event Bus Publish Guardrails + API i18n Cleanup",
      "summary": "Status: Accepted Date: 2025-12-28 Context: Event publishing failures were silently ignored, violating the no-error-suppression rule. Several API error strings were missing i18n keys, breaking the localized error contract. A few runtime logs still interpolated context into messages and needed structured fields. Decision: Introduce EventBusError and make EventBus::publish return Result so failures are handled explicitly. Add publish helpers in runtime services (API state, fsops, libtorrent worker, app bootstrap) that log publish failures with structured fields. Expand the API i18n bundle to include new error keys used by settings and auth flows. Move anyhow to dev-dependencies for revaer-api and remove the remaining",
      "tags": [],
      "href": "/adr/062-eventbus-publish-guardrails/"
    },
    {
      "id": "adr/063-ci-compliance-cleanup",
      "title": "CI compliance cleanup for test error handling",
      "summary": "Status: Accepted Date: 2025-12-30 Context: Motivation: restore just ci compliance and remove explicit panic/unwrap patterns in tests to align with AGENT error-handling rules. Constraints: keep coverage ≥ 80% and avoid new dependencies while satisfying clippy::pedantic. Decision: Replace explicit panic!/unwrap usages in tests with Result-returning flows and let...else patterns. Exercise must-use values in tests to avoid lint violations. Consequences: Positive outcomes: lint clean, tests remain deterministic, and coverage stays above the gate. Risks or trade-offs: slightly more verbose test code; added Result plumbing in tests. Follow-up: Implementation tasks: keep new tests using Result and let...else patterns when adding coverage. Review checkpoints:",
      "tags": [
        "dependency-rationale",
        "design-notes",
        "observability-updates",
        "risk-rollback-plan",
        "test-coverage-summary"
      ],
      "href": "/adr/063-ci-compliance-cleanup/"
    },
    {
      "id": "adr/064-factory-reset-error-context",
      "title": "Factory reset hardening and allow-path validation",
      "summary": "Status: Accepted Date: 2025-12-30 Context: Motivation: surface actionable factory reset failures, prevent long-running resets from hanging, and tighten allow-path validation for directory entries. Constraints: preserve API i18n behavior, keep error context structured, and avoid new dependencies or inline SQL outside migrations. Decision: Derive the deepest error source string for factory reset failures and return it in structured context. Allow factory resets to proceed without API keys when no keys exist, even if a stale API key header is present. Add a lock timeout in the factory reset stored procedure to avoid indefinite blocking. Validate each allow-path entry as a non-empty",
      "tags": [
        "dependency-rationale",
        "design-notes",
        "observability-updates",
        "risk-rollback-plan",
        "test-coverage-summary"
      ],
      "href": "/adr/064-factory-reset-error-context/"
    },
    {
      "id": "adr/065-auth-mode-refresh",
      "title": "API key refresh and no-auth setup mode",
      "summary": "Status: Accepted Date: 2025-12-30 Context: Motivation: keep API keys valid without manual re-auth, and allow local setup flows to opt into anonymous access. Constraints: no new dependencies, stored-procedure-only config writes, and API errors localized through i18n. Decision: Add app_profile.auth_mode with api_key/none and allow anonymous auth when none is configured. Introduce /v1/auth/refresh to extend API key expiry without rotation, and schedule refresh in the UI before expiry. Persist anonymous auth state for no-auth setups and reuse the well-known snapshot for setup changeset construction. Store API key expirations in local storage and refresh with a 24-hour safety skew. Consequences: Positive outcomes: no-auth",
      "tags": [
        "dependency-rationale",
        "design-notes",
        "observability-updates",
        "risk-rollback-plan",
        "test-coverage-summary"
      ],
      "href": "/adr/065-auth-mode-refresh/"
    },
    {
      "id": "adr/066-factory-reset-sse-setup",
      "title": "Factory reset UX fallback and SSE setup gating",
      "summary": "Status: Accepted Date: 2025-12-30 Context: Motivation: SSE returns 409 when the server is in setup mode, leaving the UI stuck after factory reset or manual setup transitions. Constraints: keep the UI non-blocking, avoid API key reuse after reset, and keep state transitions client-driven without new dependencies. Decision: Gate SSE connection on AppModeState and surface a disconnected status when the server is in setup mode. Treat SSE 409 responses as a setup signal: clear auth state and move the app into setup mode in the store. Ensure factory reset success forces AppModeState::Setup even if the reload fails. Consequences: Positive outcomes: factory",
      "tags": [
        "dependency-rationale",
        "design-notes",
        "observability-updates",
        "risk-rollback-plan",
        "test-coverage-summary"
      ],
      "href": "/adr/066-factory-reset-sse-setup/"
    },
    {
      "id": "adr/067-logs-ansi-rendering",
      "title": "Logs ANSI rendering and bounded buffer",
      "summary": "Status: Accepted Date: 2025-12-30 Context: Motivation: logs view must preserve ANSI color/style codes, Unicode characters, and remain responsive over long sessions. Constraints: keep memory usage bounded, avoid new dependencies, keep layout aligned with UI rules, and avoid build conflicts with trunk serve. Decision: Parse ANSI SGR sequences into styled spans for rendering with theme-aware colors. Keep a bounded in-memory log buffer with a fixed max size. Use streaming text decode to preserve multibyte characters across chunks. Add new log lines to the top of the view and restrict scrolling to the terminal area. Use a dedicated dist-serve directory for trunk",
      "tags": [
        "dependency-rationale",
        "observability-updates",
        "risk-rollback-plan",
        "test-coverage-summary"
      ],
      "href": "/adr/067-logs-ansi-rendering/"
    },
    {
      "id": "adr/068-agent-compliance-clippy-cargo",
      "title": "Agent Compliance: Clippy Cargo Lints",
      "summary": "Status: Accepted Date: 2025-12-31 Context: AGENT.md mandates clippy::cargo in the crate-level deny list for every lib/main. Several crate roots were missing clippy::cargo, which is a documented compliance violation. Decision: Add clippy::cargo to every crate-level lint deny list alongside clippy::all/pedantic/nursery. Keep existing unsafe-code policies intact (FFI-only allowances remain scoped). Consequences: Positive outcomes: consistent lint coverage across crates; future clippy::cargo issues surface early. Risks or trade-offs: additional lint findings may require follow-up fixes in future changes. Follow-up: Run just ci to confirm the lint gate passes across the workspace. Monitor future changes for clippy::cargo warnings introduced by new code. Motivation: Align all",
      "tags": [],
      "href": "/adr/068-agent-compliance-clippy-cargo/"
    },
    {
      "id": "adr/069-docs-mdbook-mermaid-version",
      "title": "Docs: Pin mdbook-mermaid for just docs",
      "summary": "Status: Accepted Date: 2025-12-31 Context: Motivation: just docs failed because mdbook-mermaid 0.16.2 cannot parse under mdbook 0.5.2, even though docs are valid. Constraints: Docs build must run via just, no manual tooling, avoid repo changes outside the justfile. Test coverage summary: just docs run after change; no unit tests applicable. Observability updates: None. Dependency rationale: No new crates; pin existing mdbook-mermaid tool to 0.17.0 to match mdbook 0.5.x behavior. Decision: Require mdbook-mermaid 0.17.0 in just docs-install and reinstall if mismatched. Make just docs invoke just docs-install before build and index. Alternatives considered: rely on user-managed tool versions; pin mdbook to",
      "tags": [],
      "href": "/adr/069-docs-mdbook-mermaid-version/"
    },
    {
      "id": "adr/070-dashboard-ui-checklist",
      "title": "Dashboard UI checklist completion and auth/SSE hardening",
      "summary": "Status: Accepted Date: 2026-01-01",
      "tags": [
        "consequences",
        "context",
        "decision",
        "dependency-rationale",
        "design-notes",
        "follow-up",
        "motivation",
        "observability-updates",
        "risk-rollback-plan",
        "test-coverage-summary"
      ],
      "href": "/adr/070-dashboard-ui-checklist/"
    },
    {
      "id": "adr/071-libtorrent-native-fallback",
      "title": "071: Libtorrent Native Fallback for Default CI",
      "summary": "Status: Accepted Date: 2026-01-02 Context: just ci runs cargo udeps across the workspace and fails on hosts without libtorrent headers or pkg-config data. Native libtorrent integration tests are explicitly gated by REVAER_NATIVE_IT, so default runs should remain deterministic without requiring native system deps. Decision: Gate native FFI compilation behind a build-time cfg (libtorrent_native) that is emitted only when libtorrent is discovered by build.rs. When REVAER_NATIVE_IT is set, missing libtorrent is treated as an error; otherwise the build falls back to the stub backend with a warning. Alternatives considered: require libtorrent for all CI/dev runs, or remove --all-features from the quality",
      "tags": [],
      "href": "/adr/071-libtorrent-native-fallback/"
    },
    {
      "id": "adr/072-agent-compliance-refactor",
      "title": "072: Agent Compliance Refactor (UI + HTTP + Config Layout)",
      "summary": "Status: Accepted Date: 2026-01-03 Context: Motivation: bring the repository into closer alignment with AGENT layout and tooling rules after drift in UI routing, HTTP module layout, and config structure. Constraints: preserve existing APIs/behavior while relocating modules; avoid new dependencies and keep stored-procedure-only database access intact. Decision: Design notes: move torrent UI views into the feature module, scope window/router usage to the app layer, and reorganize API HTTP handlers/DTOs into handlers/ and dto/ while re-exporting to preserve public paths. Alternatives considered: leave modules in place and document exceptions (rejected to keep the structure enforceable); introduce a large-scale API surface rename (rejected",
      "tags": [],
      "href": "/adr/072-agent-compliance-refactor/"
    },
    {
      "id": "adr/073-ui-checklist-followups",
      "title": "UI checklist follow-ups: SSE detail refresh, labels shortcuts, strict i18n, and anymap removal",
      "summary": "Status: Accepted Date: 2026-01-03",
      "tags": [
        "consequences",
        "context",
        "decision",
        "dependency-rationale",
        "design-notes",
        "follow-up",
        "motivation",
        "observability-updates",
        "risk-rollback-plan",
        "test-coverage-summary"
      ],
      "href": "/adr/073-ui-checklist-followups/"
    },
    {
      "id": "adr/074-vendored-yewdux-latest-yew",
      "title": "Temporary vendoring of yewdux for latest Yew compatibility",
      "summary": "Status: Accepted Date: 2026-01-03 Context: We must stay on the latest crates.io yew and yew-router. yewdux on crates.io (0.11) depends on yew 0.21, which conflicts with yew-router 0.19 (yew 0.22). Git dependencies are disallowed, and vendoring is normally disallowed. Decision: Vendor yewdux under vendor/yewdux and update it to compile against yew 0.22. Patch the workspace to use the vendored yewdux while keeping all other dependencies on crates.io. Document the exception in AGENT.md with a hard requirement to remove the vendored copy once a compatible crates.io release exists. Alternatives considered: Wait on the latest Yew (rejected; staying current is top priority).",
      "tags": [],
      "href": "/adr/074-vendored-yewdux-latest-yew/"
    },
    {
      "id": "adr/075-coverage-gate-tests",
      "title": "075: Coverage gate tests for config loader and data toggles",
      "summary": "Status: Accepted Date: 2026-01-03 Context: Motivation: just cov failed at 76.46% line coverage, blocking just ci. Constraints: no coverage suppression, no new dependencies, and AGENT compliance. Decision: Add focused unit tests for config loader mapping/secret helpers and data config toggle sets. Alternatives considered: ignore the gate or suppress coverage reporting (rejected). Consequences: Positive outcomes: just cov clears the 80% line gate; configuration mappings gain direct test coverage. Risks or trade-offs: slightly longer test runtime. Follow-up: Implementation tasks: add loader/data tests, update checklist status, run just ci. Review checkpoints: validate coverage stays >=80% during follow-up changes. Test coverage summary: just cov",
      "tags": [],
      "href": "/adr/075-coverage-gate-tests/"
    },
    {
      "id": "adr/076-hashbrown-multiple-versions-exception",
      "title": "076: Temporary clippy exception for hashbrown multiple versions",
      "summary": "Status: Accepted Date: 2026-01-03 Context: Motivation: just lint fails on clippy::multiple_crate_versions due to hashbrown 0.15 (via sqlx-core -> hashlink ^0.10) and 0.16 (via yew -> indexmap ^2.11). Constraints: keep yew/yew-router latest, avoid vendoring or git crates, preserve CI via just. Decision: Allow clippy::multiple_crate_versions in the lint recipe and crate roots. Allow duplicate hashbrown/foldhash in cargo-deny bans to keep just deny green. Remove the exception once SQLx releases a version compatible with hashlink ^0.11 (or the dependency graph otherwise unifies on a single hashbrown). Consequences: Positive outcomes: just lint passes while keeping primary deps current. Risks or trade-offs: reduced lint signal",
      "tags": [],
      "href": "/adr/076-hashbrown-multiple-versions-exception/"
    },
    {
      "id": "adr/077-ui-menu-interactions",
      "title": "Restore UI Menu Interactions",
      "summary": "Status: Accepted Date: 2026-01-09 Context: Motivation: top-right menus did not open reliably, and sidebar labels were hidden in the default open state. Constraints: No new dependencies; use daisyUI/Nexus patterns and keep component props stable. Design notes: Align dropdown markup with daisyUI examples and compose menu UI from shared components. Decision: Summary of the choice made: update dropdowns to the daisyUI focus pattern, compose locale/server menus into dedicated components, and default sidebar labels to visible while hiding them only in collapsed/hover modes using sibling selectors. Alternatives considered: keep inline markup, add JS for dropdown state, or hardcode label visibility without toggle",
      "tags": [],
      "href": "/adr/077-ui-menu-interactions/"
    },
    {
      "id": "adr/078-local-auth-bypass-guardrails",
      "title": "078 - Local Auth Bypass Guardrails (Task Record)",
      "summary": "Status: In Progress Date: 2026-01-11",
      "tags": [
        "consequences",
        "decision",
        "dependency-rationale",
        "design-notes",
        "motivation",
        "observability-updates",
        "risk-rollback",
        "test-coverage-summary"
      ],
      "href": "/adr/078-local-auth-bypass-guardrails/"
    },
    {
      "id": "adr/079-advisory-rustsec-2025-0141",
      "title": "Advisory RUSTSEC-2025-0141 Temporary Ignore",
      "summary": "Status: In Progress Date: 2026-01-11 Context: bincode 1.3.3 is flagged as unmaintained (RUSTSEC-2025-0141). The dependency is pulled via gloo-worker in gloo, which is required by the Yew UI stack. No drop-in upgrade path is available without upstream releases. Decision: Add RUSTSEC-2025-0141 to .secignore while the UI depends on gloo/yew that transitively require bincode 1.3.3. Revisit once upstream releases remove or replace the dependency. Consequences: just audit passes while the advisory remains documented. The unmaintained dependency stays in the tree until upstream updates land. Follow-up: Track gloo and yew release notes for bincode replacement/removal. Remove the ignore once the dependency graph",
      "tags": [
        "dependency-rationale",
        "design-notes",
        "motivation",
        "observability-updates",
        "risk-rollback-plan",
        "test-coverage-summary"
      ],
      "href": "/adr/079-advisory-rustsec-2025-0141/"
    },
    {
      "id": "adr/080-local-auth-bypass-reliability",
      "title": "080 - Local Auth Bypass Reliability (Task Record)",
      "summary": "Status: Accepted Date: 2026-01-11",
      "tags": [
        "consequences",
        "decision",
        "dependency-rationale",
        "design-notes",
        "motivation",
        "observability-updates",
        "risk-rollback",
        "test-coverage-summary"
      ],
      "href": "/adr/080-local-auth-bypass-reliability/"
    },
    {
      "id": "adr/081-playwright-e2e-suite",
      "title": "081 - Playwright E2E Test Suite (Task Record)",
      "summary": "Status: Accepted Date: 2026-01-14",
      "tags": [
        "consequences",
        "decision",
        "dependency-rationale",
        "design-notes",
        "motivation",
        "observability-updates",
        "risk-rollback",
        "test-coverage-summary"
      ],
      "href": "/adr/081-playwright-e2e-suite/"
    },
    {
      "id": "adr/082-e2e-gate-and-selectors",
      "title": "082 - E2E Gate and Selector Stability (Task Record)",
      "summary": "Status: Accepted Date: 2026-01-14",
      "tags": [
        "consequences",
        "decision",
        "dependency-rationale",
        "design-notes",
        "motivation",
        "observability-updates",
        "risk-rollback",
        "test-coverage-summary"
      ],
      "href": "/adr/082-e2e-gate-and-selectors/"
    },
    {
      "id": "adr/083-api-preflight-e2e",
      "title": "083 - API Preflight Before UI E2E (Task Record)",
      "summary": "Status: Accepted Date: 2026-01-14",
      "tags": [
        "consequences",
        "decision",
        "dependency-rationale",
        "design-notes",
        "motivation",
        "observability-updates",
        "risk-rollback",
        "test-coverage-summary"
      ],
      "href": "/adr/083-api-preflight-e2e/"
    },
    {
      "id": "adr/084-e2e-api-coverage-temp-db",
      "title": "084: E2E API Coverage With Temp Databases",
      "summary": "Status: Accepted Date: 2026-01-15 Context: What problem are we solving? E2E coverage must exercise 100% of the HTTP API surface under both auth modes and surface API regressions before UI tests. Test runs must isolate state using temporary databases and document OpenAPI coverage gaps. What constraints or forces shape the decision? The API server derives port and auth mode from persisted configuration; setup flow must be exercised to activate the instance. E2E runs must be invoked via just and use tests/.env for configuration. Decision: Summary of the choice made. Add Playwright global setup/teardown to perform setup and factory reset. Expand",
      "tags": [
        "task-record"
      ],
      "href": "/adr/084-e2e-api-coverage-temp-db/"
    },
    {
      "id": "adr/085-e2e-openapi-client-and-coverage",
      "title": "085 - E2E OpenAPI Client and Unified Coverage",
      "summary": "Status: Accepted Date: 2026-01-16 Context: What problem are we solving? E2E runs overwrote reports and did not enforce full API/UI surface coverage. API E2E tests needed a generated TypeScript client based on the OpenAPI spec. What constraints or forces shape the decision? Use a single Playwright execution with one final report. Use a maintained generator that supports native Node.js fetch. Keep OpenAPI synchronized with the router surface. Decision: Summary of the choice made. Expand OpenAPI coverage to match all router endpoints and generate a typed E2E client via openapi-typescript + openapi-fetch. Enforce API operation and UI route coverage in the",
      "tags": [
        "task-record"
      ],
      "href": "/adr/085-e2e-openapi-client-and-coverage/"
    },
    {
      "id": "adr/index",
      "title": "ADRs",
      "summary": "Create a new ADR using the template in docs/adr/template.md. Give it a sequential identifier (e.g., 001, 002) and a concise title. Capture context, decision, consequences, and follow-up actions. Append the new ADR entry to the end of the Catalogue list above. Append the same entry under ADRs in docs/SUMMARY.md, keeping it nested so the sidebar stays collapsed. Reference ADRs from code comments or docs where the decision applies.",
      "tags": [
        "catalogue",
        "suggested-use-workflow"
      ],
      "href": "/adr/index/"
    },
    {
      "id": "adr/template",
      "title": "{ADR Title}",
      "summary": "Status: {Proposed|Accepted|Superseded} Date: {YYYY-MM-DD} Context: What problem are we solving? What constraints or forces shape the decision? Decision: Summary of the choice made. Alternatives considered. Consequences: Positive outcomes. Risks or trade-offs. Follow-up: Implementation tasks. Review checkpoints.",
      "tags": [],
      "href": "/adr/template/"
    },
    {
      "id": "api/guides/bootstrap",
      "title": "Bootstrap & Workflow Lifecycle",
      "summary": "This guide explains how the Revaer application stitches configuration, orchestration, and observability components together once the binary starts.",
      "tags": [
        "error-handling",
        "operational-signals",
        "runtime-updates",
        "startup-flow"
      ],
      "href": "/api/guides/bootstrap/"
    },
    {
      "id": "api/guides/cli",
      "title": "CLI Usage Guide",
      "summary": "The revaer CLI provides parity with the public API while honoring the same authentication, pagination, and SSE semantics.",
      "tags": [
        "commands",
        "exit-codes",
        "global-flags",
        "telemetry"
      ],
      "href": "/api/guides/cli/"
    },
    {
      "id": "api/guides/operations",
      "title": "Operational Setup & Security",
      "summary": "Issue keys via settings changesets (SettingsChangeset::api_keys). { \"api_keys\": [ { \"op\": \"upsert\", \"key_id\": \"automation\", \"label\": \"ci\", \"secret\": \"<generated>\", \"rate_limit\": { \"burst\": 60, \"per_seconds\": 60 }, \"enabled\": true } ] } Secrets are hashed at rest. Rotate keys by supplying a new secret value. Disable keys with { \"op\": \"upsert\", \"key_id\": \"automation\", \"enabled\": false }. Remove keys with { \"op\": \"delete\", \"key_id\": \"automation\" }. All authenticated requests must include x-revaer-api-key: key_id:secret.",
      "tags": [
        "api-key-lifecycle",
        "docker-runtime",
        "rate-limiting",
        "rotation-playbook",
        "secrets-and-logging",
        "sse-and-resume"
      ],
      "href": "/api/guides/operations/"
    },
    {
      "id": "api/guides/telemetry",
      "title": "Telemetry & Metrics Reference",
      "summary": "Revaer exposes structured telemetry via Prometheus metrics, tracing spans, CLI events, and health endpoints.",
      "tags": [
        "cli-telemetry",
        "health-endpoints",
        "prometheus-metrics",
        "runbook-validation",
        "tracing"
      ],
      "href": "/api/guides/telemetry/"
    },
    {
      "id": "api/index",
      "title": "API Documentation",
      "summary": "This directory hosts HTTP API specifications, the generated OpenAPI document, and usage guides for the Revaer control plane.",
      "tags": [
        "contents",
        "current-coverage"
      ],
      "href": "/api/index/"
    },
    {
      "id": "api/openapi",
      "title": "OpenAPI Reference",
      "summary": "Canonical machine-readable description of the Revaer control plane surface.",
      "tags": [],
      "href": "/api/openapi/"
    },
    {
      "id": "api/openapi-gaps",
      "title": "OpenAPI Coverage Gaps",
      "summary": "This document lists API routes present in crates/revaer-api/src/http/router.rs that are missing from docs/api/openapi.json.",
      "tags": [
        "missing-admin-routes",
        "missing-v1-routes",
        "notes",
        "summary"
      ],
      "href": "/api/openapi-gaps/"
    },
    {
      "id": "index",
      "title": "Revaer",
      "summary": "Centralized torrent orchestration with hot-reloadable configuration, consistent CLI/API surfaces, and observability-first defaults.",
      "tags": [
        "contributing-updates",
        "llm-manifests",
        "what-youll-find-here"
      ],
      "href": "/index/"
    },
    {
      "id": "phase-one-remaining-spec",
      "title": "Phase One Remaining Engineering Specification",
      "summary": "Deliver a production-ready public interface (HTTP API, SSE, CLI) for torrent orchestration. Ship FsOps-backed artefacts through API, CLI, telemetry, and documentation with demonstrable reliability. Produce release artefacts (containers, binaries, documentation) that satisfy existing security, observability, and quality gates.",
      "tags": [
        "acceptance-criteria",
        "cross-cutting-deliverables",
        "detailed-work-breakdown",
        "objectives",
        "scope-overview",
        "security-observability-requirements-cross-cutting",
        "sequencing-suggested"
      ],
      "href": "/phase-one-remaining-spec/"
    },
    {
      "id": "phase-one-roadmap",
      "title": "Phase One Roadmap",
      "summary": "_Last updated: 2025-11-27_ This document captures the current delta between the Phase One objective and the existing codebase. It should be kept in sync as work progresses across the eight workstreams.",
      "tags": [
        "next-steps-tracking",
        "remaining-scope-specification",
        "snapshot"
      ],
      "href": "/phase-one-roadmap/"
    },
    {
      "id": "platform/api",
      "title": "HTTP API",
      "summary": "REST + SSE surface exposed by `revaer-api`. The OpenAPI document is served at `/docs/openapi.json` and regenerated via `just api-export`.",
      "tags": [
        "authentication",
        "endpoint-inventory-core-surface",
        "health-and-metrics",
        "listing-and-filtering-get-v1-torrents",
        "sse-stream-get-v1-torrents-events",
        "torrent-actions-post-v1-torrents-id-action",
        "torrent-submission-post-v1-torrents"
      ],
      "href": "/platform/api/"
    },
    {
      "id": "platform/cli",
      "title": "CLI Reference",
      "summary": "`revaer-cli` provides parity with the API for setup, configuration management, torrent lifecycle, and observability.",
      "tags": [
        "configuration-maintenance",
        "event-streaming",
        "global-flags-and-environment",
        "setup-flow",
        "torrent-lifecycle"
      ],
      "href": "/platform/cli/"
    },
    {
      "id": "platform/configuration",
      "title": "Configuration Surface",
      "summary": "Canonical reference for the PostgreSQL-backed settings documents that drive Revaer's runtime behavior.",
      "tags": [
        "api-keys-and-secrets",
        "app-profile-settings-app-profile",
        "change-workflows",
        "engine-profile-settings-engine-profile",
        "filesystem-policy-settings-fs-policy",
        "snapshot-components",
        "telemetry-toggle"
      ],
      "href": "/platform/configuration/"
    },
    {
      "id": "platform/native-tests",
      "title": "Native Libtorrent Integration Tests",
      "summary": "These tests are opt-in (gated by REVAER_NATIVE_IT) to keep the default matrix deterministic; include them explicitly in feature-matrix runs. To run the feature-gated native libtorrent integration suite locally: export DOCKER_HOST=${DOCKER_HOST:-unix:///Users/vanna/.colima/default/docker.sock} export REVAER_NATIVE_IT=1 just ci just test-native CI note: add a matrix job that sets REVAER_NATIVE_IT=1 and points DOCKER_HOST at the runner’s daemon to ensure the native path stays covered.",
      "tags": [],
      "href": "/platform/native-tests/"
    },
    {
      "id": "platform/torrent-flows",
      "title": "Torrent Flows",
      "summary": "Operational views for the torrent lifecycle and the torrent authoring path. These diagrams are reference-only; wire changes must follow the stored-procedure, clamp-before-apply, and observability guardrails in AGENT.md.",
      "tags": [
        "admission-runtime-fsops",
        "torrent-creation-authoring-flow"
      ],
      "href": "/platform/torrent-flows/"
    },
    {
      "id": "release-checklist",
      "title": "Phase One Release Checklist",
      "summary": "**Branch Hygiene** Ensure main is green (CI pipeline complete). Review outstanding ADRs and docs for freshness. **Build & Test** just ci just build-release just api-export **Artefact Verification** Binary: target/release/revaer-app Checksum: sha256sum target/release/revaer-app OpenAPI: docs/api/openapi.json Docker image: just docker-build && just docker-scan **Runbook Execution** Follow docs/runbook.md Archive CLI telemetry, /metrics, /health/full snapshots. **Documentation Refresh** Verify ADRs 005–007 reflect current design. Update user guides (docs/api/guides/*.md) with any behavioural changes. **Tag & Publish** Create annotated tag: git tag -a vX.Y.Z -m \"Phase One release\" Push tag: git push origin vX.Y.Z Attach artefacts generated by the build-release workflow. **Post-Release Monitoring** Watch rate-limit and guard-rail",
      "tags": [],
      "href": "/release-checklist/"
    },
    {
      "id": "runbook",
      "title": "Phase One Runbook",
      "summary": "This runbook exercises the end-to-end control plane, validating FsOps, telemetry, and guard rails.",
      "tags": [
        "prerequisites",
        "scenario",
        "verification-artifacts"
      ],
      "href": "/runbook/"
    },
    {
      "id": "ui/flows",
      "title": "Web UI Flows and Diagrams",
      "summary": "Visual references for the Phase 1 UX: navigation, component wiring, SSE handling, and torrent lifecycle. Use these diagrams when extending the UI or adding tests.",
      "tags": [
        "component-graph",
        "interaction-notes",
        "navigation-flow",
        "sse-event-flow",
        "torrent-lifecycle-ui-perspective"
      ],
      "href": "/ui/flows/"
    },
    {
      "id": "ui/index",
      "title": "Web UI - Phase 1",
      "summary": "Rust/Yew UI for the Phase 1 torrent workflow. The goal is a responsive, touch-friendly surface that stays usable on 360px phones through 4K desktops while handling large torrent libraries. **Pages**: Dashboard, Torrents (list + detail), Logs, Health, Settings. **Modes**: Simple (trimmed controls) and Advanced (full controls). Stored in local storage. **Transport**: REST for initial payloads; fetch-based SSE for live updates and logs (header-auth supported, EventSource not used).",
      "tags": [
        "auth-and-setup",
        "layout-and-breakpoints",
        "running-the-ui",
        "settings-coverage",
        "theming-and-localization",
        "transport-and-sse"
      ],
      "href": "/ui/index/"
    }
  ]
}