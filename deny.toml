# cargo-deny configuration aligned with the Phase One licensing policy.

[advisories]
ignore = [
    "RUSTSEC-2024-0370", # proc-macro-error unmaintained; yew transitive, no alternative in current release line
    "RUSTSEC-2025-0141", # bincode unmaintained; transitive via gloo-worker in the UI stack
]

[licenses]
allow = [
    "Apache-2.0",
    "BSD-2-Clause",
    "BSD-3-Clause",
    "MIT-0",
    "MIT",
    "Unlicense",
    "Unicode-3.0",
    "Zlib",
    "ISC",
    "CDLA-Permissive-2.0",
]
confidence-threshold = 0.8
exceptions = []

[licenses.private]
ignore = false
registries = []

[bans]
multiple-versions = "deny"
wildcards = "allow"

[[bans.skip]]
crate = "getrandom@0.2.16"
reason = "Legacy rand 0.8 stack from password hashing dependencies."


[[bans.skip]]
crate = "rand@0.8.5"
reason = "sqlx 0.8 transitively depends on rand 0.8.x."

[[bans.skip]]
crate = "rand@0.9.2"
reason = "Workspace crates use rand 0.9.x directly while argon2/sqlx still pull rand 0.8.x."

[[bans.skip]]
crate = "rand_chacha@0.3.1"
reason = "sqlx 0.8 transitively depends on rand 0.8.x stack."

[[bans.skip]]
crate = "rand_chacha@0.9.0"
reason = "rand 0.9.x stack accompanies the workspace rand dependency; argon2 stack remains on rand 0.8."

[[bans.skip]]
crate = "rand_core@0.6.4"
reason = "argon2/password-hash use rand_core 0.6.x."

[[bans.skip]]
crate = "rand_core@0.9.3"
reason = "rand 0.9.x stack accompanies the workspace rand dependency; argon2 stack remains on rand_core 0.6."


[[bans.skip]]
crate = "http@0.2.12"
reason = "Legacy gloo-net depends on http 0.2; allow alongside http 1.x."


[[bans.skip]]
crate = "syn@1.0.109"
reason = "proc-macro-error pulls syn 1.x; unavoidable via yew 0.21."

[[bans.skip]]
crate = "thiserror@1.0.69"
reason = "Prometheus/protobuf pin the 1.x line."

[[bans.skip]]
crate = "thiserror@2.0.17"
reason = "Workspace crates use the current 2.x line."

[[bans.skip]]
crate = "thiserror-impl@1.0.69"
reason = "Matches thiserror 1.x pinned by prometheus/protobuf."

[[bans.skip]]
crate = "thiserror-impl@2.0.17"
reason = "Matches thiserror 2.x used by workspace crates."

[[bans.skip]]
crate = "hashbrown@*"
reason = "SQLx/hashlink require hashbrown 0.15.x while yew/indexmap require 0.16.x (ADR 076)."

[[bans.skip]]
crate = "foldhash@*"
reason = "Paired with hashbrown 0.15.x and 0.16.x until SQLx adopts hashlink 0.11 (ADR 076)."

[[bans.skip]]
crate = "webpki-roots@*"
reason = "Both sqlx/ureq (0.26.x) and hyper-rustls/reqwest (1.x) are required."

[[bans.skip]]
crate = "windows-sys@*"
reason = "Tokio, sqlx, and rustls require multiple versions across their supported Windows targets."

[[bans.skip]]
crate = "windows-targets@*"
reason = "Matches windows-sys releases for individual target triples."

[[bans.skip]]
crate = "windows_aarch64_gnullvm@*"
reason = "Target-specific windows bindings; duplicates mirror windows-sys versions."

[[bans.skip]]
crate = "windows_aarch64_msvc@*"
reason = "Target-specific windows bindings; duplicates mirror windows-sys versions."

[[bans.skip]]
crate = "windows_i686_gnu@*"
reason = "Target-specific windows bindings; duplicates mirror windows-sys versions."

[[bans.skip]]
crate = "windows_i686_gnullvm@*"
reason = "Target-specific windows bindings; duplicates mirror windows-sys versions."

[[bans.skip]]
crate = "windows_i686_msvc@*"
reason = "Target-specific windows bindings; duplicates mirror windows-sys versions."

[[bans.skip]]
crate = "windows_x86_64_gnu@*"
reason = "Target-specific windows bindings; duplicates mirror windows-sys versions."

[[bans.skip]]
crate = "windows_x86_64_gnullvm@*"
reason = "Target-specific windows bindings; duplicates mirror windows-sys versions."

[[bans.skip]]
crate = "windows_x86_64_msvc@*"
reason = "Target-specific windows bindings; duplicates mirror windows-sys versions."

[sources]
unknown-registry = "deny"
unknown-git = "deny"
allow-registry = ["https://github.com/rust-lang/crates.io-index"]
allow-git = []
